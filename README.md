# Carpet YBS Extension
这是一个基于Carpet模组的扩展，专注于村民相关的功能优化和增强，为玩家提供更好的游戏体验和更多的自定义选项。

## 功能特性

### 总控开关
- 添加了总控开关（ybsMasterSwitch），可以统一控制所有功能的启用和关闭
- 默认关闭，开启后才能使用其他所有子功能
- 当总控关闭时，所有子功能均无效

### 村民优化功能

#### 调整村民识别床的距离
- 允许自定义设置村民寻找和识别床的最大距离
- 默认值为48格，最大可调整至128格
- 当玩家手持床右击村民时，会显示搜索范围的粒子效果，直观展示设置的距离

#### 优化村民上下矿车行为
- 改善村民与矿车的交互机制，使村民更容易进入和离开矿车
- 优化村民在矿车内的寻路逻辑
- 默认禁用，可通过设置开关启用

#### 优化铁傀儡生成条件
- 调整村民被恐吓后铁傀儡的生成逻辑
- 优化生成概率和条件判断
- 减少不必要的性能消耗
- 默认禁用，可通过设置开关启用

#### 强制绑定村民与床
- 允许使用烈焰棒和床强制将村民绑定到指定的床位置
- 手持烈焰棒右键村民，显示"你已选中村民"提示
- 手持床右键村民，显示"你已选中白床"提示
- 绑定成功时显示"绑定成功"提示
- 默认禁用，可通过设置开关启用

## 版本兼容性
- Minecraft 版本：1.21.x
- Fabric Loader 版本：0.16.10或更高
- Carpet 模组版本：1.4.147+v240613或更高
- Java 版本：21或更高

## 安装方法

1. 确保已安装兼容版本的Minecraft 1.21和Fabric Loader
2. 安装Carpet模组（推荐使用指定版本以确保兼容性）
3. 安装Fabric API
4. 将本模组的JAR文件放入游戏目录下的`mods`文件夹中
5. 启动游戏即可加载模组

## 使用方法

### 配置设置
所有设置都可以通过Carpet命令进行配置：

```
/carpet ybsMasterSwitch <true|false> - 总控开关，控制所有功能的启用和关闭（默认：false）
/carpet villagerBedSearchDistance <distance> - 设置村民识别床的距离（默认：48，最大值：128）
/carpet VilliagerCanOnlyRideMinecart <true|false> - 启用/禁用村民只能乘坐矿车的限制（默认：false）
/carpet optimizedIronGolemSpawning <true|false> - 启用/禁用优化的铁傀儡生成条件（默认：false）
/carpet allowForcedBedBinding <true|false> - 允许使用烈焰棒和床强制绑定村民到指定床（默认：false）
/carpet villagerBasicFunctionOnly - 仅保留基本村民功能（上下矿车、优化铁傀儡生成、识别床距离、村民随机游走功能，以及烈焰棒绑定村民与床）（默认：true，且无法被关闭）
```

### 查看设置
可以使用自定义命令查看所有设置：

```
ybs settings
```

## 注意事项
- 更改设置后可能需要等待游戏刻更新生效
- 当调整村民识别床距离时，过远的距离可能会增加服务器负担
- 所有子功能均可独立开关，但必须先开启总控开关才能生效
- 建议根据需求逐步启用功能，避免一次性启用过多功能导致性能问题

## 许可证

本项目使用MIT许可证 - 详见LICENSE文件